---
import Email from '@/components/icons/Email.astro';
import GitHub from '@/components/icons/GitHub.astro';
import Twitter from '@/components/icons/Twitter.astro';
import { EMAIL, HANDLE_GITHUB, HANDLE_TWITTER } from '@/constants';
import Layout from '@/layouts/Layout.astro';
import { getSortedPosts } from '@/utils/posts';
import { getBlogUrl } from '@/utils/url';

const sortedRecentPosts = (await getSortedPosts()).slice(0, 4).filter((p) => !p.data.hidden);
---

<Layout>
  <div class="space-y-6">
    <h1 class="text-3xl font-bold md:text-4xl">Hi, I'm Noah ğŸ‘‹</h1>
    <h2 class="text-lg">I'm a maker and freelance web developer based in Switzerland ğŸ‡¨ğŸ‡­</h2>
    <div class="flex space-x-3">
      <a
        class="hover:bg-slate-100 py-2 px-3 rounded-lg dark:hover:bg-neutral-800"
        href={`https://github.com/${HANDLE_GITHUB}`}
        target="_blank"
        aria-label="GitHub"
      >
        <GitHub />
      </a>
      <a
        class="hover:bg-slate-100 py-2 px-3 rounded-lg dark:hover:bg-neutral-800"
        href={`https://twitter.com/${HANDLE_TWITTER}`}
        target="_blank"
        aria-label="Twitter"
      >
        <Twitter />
      </a>
      <a
        class="hover:bg-slate-100 py-2 px-3 rounded-lg dark:hover:bg-neutral-800"
        href={`mailto:${EMAIL}`}
        target="_blank"
        aria-label="Email"
      >
        <Email />
      </a>
    </div>
    <div class="py-6">
      <h3 class="text-2xl font-semibold">Latest posts</h3>
      <ul class="py-2 space-y-2">
        {
          sortedRecentPosts.map((post) => (
            <li>
              <a class="text-lg hover:underline" href={getBlogUrl(post)}>
                {post.data.title}
              </a>
            </li>
          ))
        }
      </ul>
    </div>
  </div>
</Layout>
